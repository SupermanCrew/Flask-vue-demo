import{s as y}from"./s-drawer.e3a36ec6.js";import{_ as w,r as i,o as x,c as S,a as t,w as a,F as k,f as m,b as N}from"./index.5c1af3c9.js";const V={components:{sDrawer:y},watch:{visible(e){e||(this.form={})}},data(){return{form:{},visible:!1,tableData:[],totalNum:100,search:{pageNum:1,pageSize:10}}},created(){this.getList()},methods:{async getList(){const e=await this.$request.get("/zz/",{params:this.search});e.data.code===200&&(console.log(e.data),this.tableData=e.data.data,this.totalNum=e.data.zs)},handleSizeChange(e){console.log(`\u6BCF\u9875 ${e} \u6761`),this.search.pageSize=e,this.getList()},handleCurrentChange(e){console.log(`\u5F53\u524D\u9875: ${e}`),this.search.pageNum=e,this.getList()},resetSearch(){let e={pageNum:this.search.pageNum,pageSize:this.search.pageSize};this.search=e,this.getList()},editItem(e){this.form=this.$deepClone(e),this.visible=!0},async saveData(){if(this.form.id){const e=await this.$request.put("/zz/"+this.form.id+"/",this.form);e.data.code===200&&(this.$message.success(e.data.message),this.getList(),this.visible=!1)}else{const e=await this.$request.post("/zz/",this.form);e.data.code===200&&(this.$message.success(e.data.message),this.getList(),this.visible=!1)}},async deleteItem(e){const s=await this.$request.delete("/zz/"+e+"/");s.data.code===200&&(this.$message.success(s.data.message),this.getList())},handleExceed(e,s){this.$notify.warning({title:"\u8B66\u544A",message:`\u53EA\u80FD\u9009\u62E9 ${this.limitNum} \u4E2A\u6587\u4EF6\uFF0C\u5F53\u524D\u5171\u9009\u62E9\u4E86 ${e.length+s.length} \u4E2A`})},handleBeforeUpload(e){e.size/1024/1024>1&&this.$notify.warning({title:"\u8B66\u544A",message:"\u56FE\u7247\u5927\u5C0F\u5FC5\u987B\u5C0F\u4E8E1M"})},handleSuccess1(e){console.log(e.data,"777777777777777777777777777777777777777"),this.form.img_url=e.data.file,this.dialogImageUrl="",this.$notify({title:"\u901A\u77E5",message:"\u4E0A\u4F20\u7167\u7247\u6210\u529F~",type:"success",duration:5e3})}}},D={style:{"text-align":"right"}};function L(e,s,I,U,l,n){const r=i("el-button"),c=i("el-input"),u=i("el-form-item"),g=i("el-col"),h=i("el-row"),p=i("el-form"),f=i("el-card"),d=i("el-table-column"),_=i("el-popconfirm"),b=i("el-table"),z=i("el-pagination"),v=i("sDrawer");return x(),S(k,null,[t(r,{type:"primary",onClick:s[0]||(s[0]=o=>l.visible=!0)},{default:a(()=>[m("\u6DFB\u52A0\u4F5C\u8005")]),_:1}),t(f,{shadow:"never",style:{"margin-top":"10px"}},{default:a(()=>[t(f,{shadow:"never",style:{margin:"10px 0"}},{default:a(()=>[t(p,{model:l.search},{default:a(()=>[t(h,{gutter:30},{default:a(()=>[t(g,{xs:24,sm:12,md:8,lg:6},{default:a(()=>[t(u,{label:"\u4F5C\u8005\u540D:"},{default:a(()=>[t(c,{modelValue:l.search.name,"onUpdate:modelValue":s[1]||(s[1]=o=>l.search.name=o),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005\u540D:"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),N("div",D,[t(r,{type:"primary",onClick:s[2]||(s[2]=o=>n.getList())},{default:a(()=>[m("\u67E5\u8BE2")]),_:1}),t(r,{onClick:s[3]||(s[3]=o=>n.resetSearch())},{default:a(()=>[m("\u91CD\u7F6E")]),_:1})])]),_:1}),t(b,{data:l.tableData,stripe:""},{default:a(()=>[t(d,{prop:"id",label:"ID",width:"70"}),t(d,{prop:"name",label:"\u59D3\u540D"}),t(d,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:a(o=>[t(r,{link:"",type:"primary",size:"small",onClick:C=>n.editItem(o.row)},{default:a(()=>[m("\u7F16\u8F91")]),_:2},1032,["onClick"]),t(_,{title:"\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:C=>n.deleteItem(o.row.id)},{reference:a(()=>[t(r,{link:"",type:"primary",size:"small"},{default:a(()=>[m("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),t(z,{background:"",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,layout:"sizes, total, prev, pager, next",total:l.totalNum,currentPage:l.search.pageNum,pageSize:l.search.pageSize},null,8,["onSizeChange","onCurrentChange","total","currentPage","pageSize"])]),_:1}),t(v,{modelValue:l.visible,"onUpdate:modelValue":s[7]||(s[7]=o=>l.visible=o),title:l.form.id?"\u7F16\u8F91\u4F5C\u8005":"\u6DFB\u52A0\u4F5C\u8005",size:"35%","close-on-click-modal":!1},{footer:a(()=>[t(r,{onClick:s[5]||(s[5]=o=>l.visible=!1)},{default:a(()=>[m("\u53D6\u6D88")]),_:1}),t(r,{type:"primary",onClick:s[6]||(s[6]=o=>n.saveData())},{default:a(()=>[m("\u786E\u5B9A")]),_:1})]),default:a(()=>[t(p,{model:l.form,"label-width":"100px",ref:"ruleFormRef"},{default:a(()=>[t(u,{label:"\u4F5C\u8005\u540D\u79F0:"},{default:a(()=>[t(c,{modelValue:l.form.name,"onUpdate:modelValue":s[4]||(s[4]=o=>l.form.name=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}const $=w(V,[["render",L],["__scopeId","data-v-7031836b"]]);export{$ as default};
